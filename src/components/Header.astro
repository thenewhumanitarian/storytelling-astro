---
export interface Props {
	button?: string
	dark?: boolean
}

const { button, dark } = Astro.props as Props
---

<header class={`${dark ? 'bg-black shadow-xs shadow-white' : 'bg-white'} flex items-center justify-between w-full cursor-default h-20 top-0 left-0 z-50`}>
	<div class='grid grid-cols-3 items-center px-6 w-full'>
		<div class='flex justify-start gap-x-2 sm:gap-x-8 items-center'>
			<div class={`${dark ? 'text-white' : 'text-black'} fill-current flex gap-3 items-center justify-start`}>
				<!-- Menu icon -->
				<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' class='fill-current text-white' id='menu-button'>
					<path d='M0 2v2h24V2Zm0 9v2h24v-2Zm0 9v2h24v-2Z'></path>
				</svg>
				<div class='fixed top-24 left-5 sm:top-0 sm:left-0 shadow-lg sm:shadow-none sm:relative flex items-center gap-3 z-50'>
					<div class='gap-2 ml-4 hidden sm:flex'>
						<svg width='18px' viewBox='0 0 105 105' fill='none' xmlns='http://www.w3.org/2000/svg'>
							<g clip-path='url(#clip0_222_26)'>
								<path
									d='M89.2986 15.282C79.4108 5.39895 66.2719 -0.0454712 52.2903 -0.0454712C38.3088 -0.0454712 25.1694 5.39883 15.282 15.282C-5.12523 35.6856 -5.12523 68.8914 15.282 89.2999C25.1698 99.183 38.3088 104.627 52.2903 104.627C66.2719 104.627 79.4113 99.1831 89.2986 89.2999C109.706 68.8927 109.706 35.6905 89.2986 15.282ZM91.0224 74.5522H76.9011C78.4429 68.5285 79.367 61.8099 79.5346 54.6659H96.8822C96.5135 61.5659 94.5609 68.3889 91.0224 74.5522ZM58.7162 96.5064C57.3563 96.7027 55.9773 96.8368 54.5887 96.9086V79.1491H70.5965C67.6804 87.2892 63.5045 93.5093 58.7162 96.5064ZM33.9844 79.149H49.9922V96.9085C48.6036 96.8366 47.2246 96.7026 45.8646 96.5062C41.0764 93.5088 36.9004 87.289 33.9844 79.149ZM7.70186 54.6659H25.0495C25.2171 61.8101 26.1412 68.5286 27.683 74.5522H13.5617C10.0184 68.3897 8.06568 61.566 7.70186 54.6659ZM14.6257 28.2731H28.1574C26.3187 34.7804 25.2222 42.1639 25.0449 50.0692H7.69242C8.06591 42.4558 10.3833 34.9243 14.6257 28.2731ZM45.8642 8.0755C47.2241 7.87917 48.6031 7.7451 49.9917 7.67327V23.6762H34.6446C37.5176 16.3979 41.4254 10.8532 45.8642 8.0755ZM69.9353 23.6763H54.5882V7.67834C55.9768 7.75016 57.3558 7.88423 58.7158 8.08055C63.1545 10.853 67.0624 16.3977 69.9353 23.6763ZM71.5394 28.2731C73.517 34.7229 74.738 42.1689 74.9343 50.0692H54.5883V28.2731H71.5394ZM49.9922 28.2731V50.0692H29.6462C29.8426 42.1685 31.0635 34.7221 33.0411 28.2731H49.9922ZM29.6462 54.6659H49.9922V74.5522H32.5293C30.863 68.5621 29.8331 61.8014 29.6462 54.6659ZM54.589 74.5522V54.6659H74.9349C74.7481 61.8005 73.7187 68.5617 72.0523 74.5522H54.589ZM79.5317 50.0692C79.3593 42.1637 78.2579 34.7797 76.4192 28.2731H89.9509C94.1933 34.9241 96.5109 42.4557 96.8843 50.0692H79.5317ZM86.5896 23.6763H74.954C73.0771 18.4667 70.6876 13.98 67.9152 10.4229C73.8383 12.6303 79.2778 16.0971 83.8789 20.6986C84.8413 21.6611 85.7373 22.6565 86.5896 23.6763ZM36.6662 10.4229C33.8938 13.9806 31.5044 18.4673 29.6274 23.6763H17.9918C18.8441 22.6564 19.7395 21.6605 20.6971 20.7028C25.3035 16.0964 30.7435 12.6303 36.6662 10.4229ZM16.5985 79.149H29.0294C30.9879 85.1057 33.5879 90.2099 36.6716 94.1602C30.7485 91.9528 25.309 88.4861 20.7079 83.8845C19.1996 82.3809 17.8388 80.7962 16.5985 79.149ZM67.9145 94.1602C70.9933 90.2098 73.5981 85.1055 75.5566 79.149H87.9875C86.7474 80.7962 85.3827 82.3858 83.8839 83.8846C79.2776 88.4862 73.8372 91.9528 67.9145 94.1602Z'
									fill='white'></path>
							</g>
							<defs>
								<clipPath id='clip0_222_26'>
									<rect width='105' height='105' fill='white'></rect>
								</clipPath>
							</defs>
						</svg>
					</div>
					<div class='isolate inline-flex rounded-xs shadow-sm'>
						<button
							type='button'
							class='transition-colors duration-150 filter-button relative -ml-px inline-flex items-center rounded-r-xs bg-black px-3 py-2 text-sm font-semibold text-white ring-1 ring-inset ring-gray-300 hover:bg-white hover:text-burgundy focus:z-10'
							id='change-language--en'
						>
							EN
						</button>
						<button
							type='button'
							class='transition-colors duration-150 filter-button relative inline-flex items-center rounded-l-xs bg-black px-3 py-2 text-sm font-semibold text-white ring-1 ring-inset ring-gray-300 hover:bg-white hover:text-burgundy focus:z-10'
							id='change-language--ar'
							dir='rtl'
						>
							ععر
						</button>
					</div>
				</div>
				<!-- Filter buttons -->
				{
					button === 'filter' && (
						<div class='fixed top-24 left-5 sm:top-0 sm:left-0 shadow-lg sm:shadow-none sm:relative flex items-center gap-3 z-50'>
							<div class='gap-2 ml-4 hidden sm:flex'>
								<svg width='14px' viewBox='0 0 117 118' xmlns='http://www.w3.org/2000/svg'>
									<path d='M4.50008 0.333252C1.37501 0.333252 -0.708187 3.87485 0.95848 6.58325L46.1665 66.9993V112.833C46.1665 115.958 49.4998 118.041 52.2081 116.583L68.8747 108.249C70.3331 107.624 71.1665 106.166 71.1665 104.499V66.9993L116.374 6.58325C118.041 3.87499 115.958 0.333252 112.833 0.333252H4.50008Z' />
								</svg>
							</div>
							<div class='isolate inline-flex rounded-xs shadow-sm'>
								<button
									type='button'
									class='transition-colors duration-150 filter-button relative inline-flex items-center rounded-l-xs bg-black px-3 py-2 text-sm font-semibold text-white ring-1 ring-inset ring-gray-300 hover:bg-white hover:text-burgundy focus:z-10'
									id='filter-button--all'
								>
									All
								</button>
								<button
									type='button'
									class='transition-colors duration-150 filter-button relative -ml-px inline-flex items-center rounded-r-xs bg-black px-3 py-2 text-sm font-semibold text-white ring-1 ring-inset ring-gray-300 hover:bg-white hover:text-burgundy focus:z-10'
									id='filter-button--unread'
								>
									Unread
								</button>
							</div>
						</div>
					)
				}
			</div>
		</div>
		<div class='flex justify-center'>
			<!-- Logo of The New Humanitarian -->
			<div class='h-10'>
				<svg
					xmlns='http://www.w3.org/2000/svg'
					id='ANIMATED-LOGO'
					height={'100%'}
					viewBox='0 0 405.32 109.7'
					class={`${dark ? 'text-white' : 'text-gray-900'}`}
				>
					<title>Logo of The New Humanitarian</title>
					<path
						class='fill-current cls-1'
						d='M176.13,87.43l-6.74.13-.12-2,2.41-.61V66.47c0-2.6-1.11-3.71-3.09-3.71-1.67,0-3.22.93-5.07,2.1l-1.55.93V84.9l2.48.61-.13,2-6.8-.13-7.36.13-.12-2,3.28-.61V46.25l-2.11.37L141,46.56V84.9l5.81.61-.12,2-10.51-.13-10.51.13-.19-2,5.94-.61V46.56l-6.87.06-4.2,10.14h-2V44.15l18.11.12L152,44.21l7.79-.74,2.22-.06v20l10.14-6.31c3.28,0,5.26.62,6.56,2s2,3.46,2,7.23V84.9l3.58.61-.12,2Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M193.63,71.48c.44,6.55,4.27,10.45,9.71,10.45a13.87,13.87,0,0,0,7.42-2.35l1.05,1.79a34.46,34.46,0,0,1-11.68,7c-8.29,0-14.9-5.56-14.9-14.53,0-8.53,5.19-14.47,15-16.82,7.42,0,11.56,4.58,11.56,11.5v2.91Zm9.28-2.29V68c0-5-.93-8-4.39-8-3.15,0-4.89,3.21-5,8.78,0,.25.06.49.06.74Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M233.55,52.87l-1.06-3.34V84.9l4.46.61-.07,2L231,87.43l-5.75.13-.19-2,4.39-.61v-38l-4.32-.74.18-2,5.07.12,8.29-.12,19.47,27.27,1.12,3V46.75l-4.45-.62.06-2,5.81.12,5.75-.12.19,2-4.33.62v41h-4.64Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M275.29,71.48c.43,6.55,4.26,10.45,9.7,10.45a13.87,13.87,0,0,0,7.42-2.35l1,1.79a34.46,34.46,0,0,1-11.68,7c-8.29,0-14.9-5.56-14.9-14.53,0-8.53,5.19-14.47,15-16.82,7.42,0,11.56,4.58,11.56,11.5v2.91Zm9.27-2.29V68c0-5-.93-8-4.39-8-3.15,0-4.88,3.21-5,8.78,0,.25.06.49.06.74Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M320.36,70.43l-.31-2.6L313.81,86.5l-7.48,2-10-28-2.72-.61.19-1.92,7.66.06,7.05-.06.19,1.92-3.09.61,6.24,19.3.43,3,6-17.93-1.48-4.33-2.54-.61.19-1.92,7.48.06,7-.06.19,1.92-3.1.61,6.25,19.36.37,2.9,7.11-22.26-3.21-.61.18-1.92,4.82.06,4.21-.06.18,1.92-3.15.61-8.66,26-7.48,2Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M43.9,136.15l4.39-.62V97.38l-4.39-.62.19-2,8.9.12,8.66-.12.18,2-4,.62v17H74v-17l-4.09-.62.13-2,8.72.12,8.84-.12.18,2-4.26.62v38.15l4.26.62-.18,2-8.84-.13-8.72.13-.13-2,4.09-.62V117H57.81v18.55l4,.62-.18,2L53,138.06l-8.9.13Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M119.28,129.78a13.38,13.38,0,0,0,.74,5.07l2.66-.13.19,2-10.52,2L110.93,133l-9.58,6.06c-3.34,0-5.57-.68-6.86-2-1.49-1.48-1.92-3.58-1.92-7.29V112l-3.34.31-.19-2,9.71-1.92,2.72-.12v21c0,2.78,1,4,3.4,4,1.43,0,2.72-.74,4.33-1.79l1.42-.87V112l-3.21.31-.19-2,9.34-1.92,2.72-.12Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M170.05,138.06l-7.05.13-.19-2,2.35-.62V117.1c0-2.6-1-3.71-2.91-3.71-1.6,0-3.33,1-4.94,2l-1.3,1v19.11l2.29.62-.19,2-6.68-.13-6.49.13-.18-2,2.28-.62V117.1c0-2.6-1-3.71-2.9-3.71-1.61,0-3.34,1-4.89,2l-1.36,1v19.11l2.35.62-.12,2-6.93-.13-7.23.13-.19-2,3.47-.62V112l-3.53.31-.25-1.92,9.84-2.1,2.35-.06.18,5.75,9.52-6.31c2.91,0,4.76.5,6.12,1.55s2.11,2.41,2.35,4.82l9.71-6.37c3.4,0,5.32.68,6.68,2s1.85,3.4,1.85,7.18v18.61l3.65.62-.12,2Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M194.47,107.7c8.6,0,11.81,2,11.81,9.34v12.74a12.44,12.44,0,0,0,.81,4.94l2.9-.18.25,2-10.82,2.22-1.73-5-7.79,5.32c-5.32,0-9.34-2.9-9.34-8a8.17,8.17,0,0,1,3-6.56l13.73-4.2v-4.58c0-3.46-.62-5-3.47-5a7.72,7.72,0,0,0-3.27.74l-1.05,7.12h-7.92V112.9Zm2.85,14.47-5.94,2.35a6.51,6.51,0,0,0-1.92,4.89c0,3.09,1.55,4.69,3.28,4.69a5.85,5.85,0,0,0,3.28-1.23l1.3-.87Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M220.38,138.06l-7.48.13-.18-2,3.46-.62V112l-3.53.43-.24-2,10-2.1,2.35-.06.06,5.75,10.14-6.31c3.34,0,5.32.62,6.62,1.92s1.92,3.4,1.92,7.17v18.74l3.64.62-.12,2-7.73-.13-7,.13-.18-2,2.41-.62V117.1c0-2.6-1-3.71-3-3.71-1.79,0-3.34.93-5.13,2.1l-1.49,1v19l2.48.62-.13,2Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M258,138.06l-7.67.13-.12-2,3.4-.62V112l-3.4.43-.25-2,9.89-2,2.42-.06v27.27l3.52.62-.12,2Zm-3.46-43,5.62-.37,2,.37.44,4.08-.81,3.65-5.62.37-2-.37-.5-4.27Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M266.76,111.78v-1.11l1.24-1.24h3.64v-4.2l7.18-4.64h1.42v9h8.1v2.22h-8.1V130c0,2.41,1.3,3.84,3.28,3.84a10.5,10.5,0,0,0,4.94-1.43l.87,1.8L280,139.05c-5.19,0-8.41-2.6-8.41-8.28v-19Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M305.41,107.7c8.59,0,11.81,2,11.81,9.34v12.74a12.45,12.45,0,0,0,.8,4.94l2.91-.18.24,2-10.82,2.22-1.73-5-7.79,5.32c-5.32,0-9.34-2.9-9.34-8a8.17,8.17,0,0,1,3-6.56l13.73-4.2v-4.58c0-3.46-.62-5-3.46-5a7.73,7.73,0,0,0-3.28.74l-1.05,7.12h-7.92V112.9Zm2.84,14.47-5.94,2.35a6.54,6.54,0,0,0-1.91,4.89c0,3.09,1.54,4.69,3.27,4.69a5.85,5.85,0,0,0,3.28-1.23l1.3-.87Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M335.4,118.21l5.93-10.2h5.32v8.6h-7.17c-.81.37-2.35,2.35-3.16,3.21l-.68.81v14.9l5.94.62-.19,2-9.89-.13-7.79.13-.12-2,3.46-.62V112l-3.46.31-.25-1.92,9.34-2.1,2.16-.12Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M357.41,138.06l-7.67.13-.12-2,3.4-.62V112l-3.4.43-.25-2,9.89-2,2.42-.06v27.27l3.52.62-.12,2ZM354,95l5.62-.37,2,.37.44,4.08-.81,3.65-5.62.37-2-.37-.5-4.27Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M382.14,107.7c8.6,0,11.81,2,11.81,9.34v12.74a12.44,12.44,0,0,0,.81,4.94l2.9-.18.25,2-10.82,2.22-1.73-5-7.79,5.32c-5.32,0-9.34-2.9-9.34-8a8.17,8.17,0,0,1,3-6.56l13.73-4.2v-4.58c0-3.46-.62-5-3.46-5a7.73,7.73,0,0,0-3.28.74l-1.05,7.12h-7.92V112.9ZM385,122.17l-5.94,2.35a6.54,6.54,0,0,0-1.91,4.89c0,3.09,1.54,4.69,3.27,4.69a5.85,5.85,0,0,0,3.28-1.23L385,132Z'
						transform='translate(-43.9 -43.41)'></path>
					<path
						class='fill-current cls-1'
						d='M408.05,138.06l-7.48.13-.18-2,3.46-.62V112l-3.53.43-.24-2,9.95-2.1,2.35-.06.06,5.75,10.14-6.31c3.34,0,5.32.62,6.62,1.92s1.92,3.4,1.92,7.17v18.74l3.64.62-.12,2-7.73-.13-7,.13-.18-2,2.41-.62V117.1c0-2.6-1-3.71-3-3.71-1.79,0-3.34.93-5.13,2.1l-1.49,1v19l2.48.62-.13,2Z'
						transform='translate(-43.9 -43.41)'></path>
					<rect
						id='cursor'
						style={{
							fill: 'rgb(159, 62, 82)',
						}}
						x='399.54'
						y='48.81'
						width='5.79'
						height='60.89'></rect>
				</svg>
			</div>
		</div>
		<div class='justify-end hidden sm:flex'><p class={`${dark ? 'text-white' : ''} font-serif`}>Journalism from the heart of crises</p></div>
		<div class={`justify-end items-center gap-2 flex sm:hidden ${dark ? 'text-white' : 'text-black'}`}>
			<svg xmlns='http://www.w3.org/2000/svg' width='20px' height='20px' viewBox='0 0 100 100' class='inline-block'>
				<path
					fill={dark ? 'white' : 'black'}
					d='M74.965 67.27c-3.133 0-6.059 1.04-8.148 3.121l-29.875-17.27c.21-1.039.418-1.875.418-2.914 0-1.04-.211-1.875-.418-2.914L66.399 30.23c2.297 2.082 5.222 3.328 8.566 3.328 6.895 0 12.535-5.617 12.535-12.484 0-6.863-5.64-12.48-12.535-12.48-6.894 0-12.535 5.617-12.535 12.484 0 1.04.207 1.875.418 2.914L33.391 41.055c-2.297-2.082-5.223-3.328-8.566-3.328-6.895 0-12.324 5.617-12.324 12.484s5.64 12.484 12.535 12.484c3.343 0 6.265-1.246 8.566-3.328l29.668 17.27c-.211.832-.418 1.664-.418 2.703 0 6.66 5.43 12.066 12.117 12.066 6.684 0 12.117-5.41 12.117-12.066-.004-6.66-5.434-12.07-12.121-12.07z'
				></path>
			</svg>
			 Share
		</div>
	</div>
</header>

<div id='menu-overlay' class='flex top-0 left-0 w-full h-screen bg-black items-center justify-center z-40'>
	<div class='flex flex-row gap-x-5'>
		<nav class='space-y-4 flex flex-col text-right'>
			<a href='/about' class='text-white text-lg sm:text-4xl hover:text-burgundy transition-colors'>حول هذا المشروع</a>
			<a href='/feedback' class='text-white text-lg sm:text-4xl hover:text-burgundy transition-colors'>أخبرنا عن انطباعك</a>
			<a href='/share' class='text-white text-lg sm:text-4xl hover:text-burgundy transition-colors'>رابط آخر</a>
			<!-- Add more links as needed -->
		</nav>
		<nav class='space-y-4 flex flex-col text-left'>
			<a href='/about' class='text-white text-lg sm:text-4xl hover:text-burgundy transition-colors'>About this project</a>
			<a href='/feedback' class='text-white text-lg sm:text-4xl hover:text-burgundy transition-colors'>Give us feedback</a>
			<a href='/share' class='text-white text-lg sm:text-4xl hover:text-burgundy transition-colors'>Another link</a>
			<!-- Add more links as needed -->
		</nav>
	</div>
	<div class='text-white absolute top-24 right-10 w-10 h-10 cursor-pointer hover:text-burgundy transition-colors' id='close-button'>
		<svg class='fill-current' width='100%' height='90' viewBox='0 0 90 90' fill='none' xmlns='http://www.w3.org/2000/svg'>
			<path
				class='fill-current'
				fill-rule='evenodd'
				clip-rule='evenodd'
				d='M1.84937 1.84937C4.02123 -0.317302 7.53683 -0.317302 9.7087 1.84937L44.6674 36.8134L79.626 1.84937C81.7979 -0.317302 85.3135 -0.317302 87.4854 1.84937C89.652 4.02123 89.652 7.53683 87.4854 9.7087L52.5214 44.6674L87.4854 79.626C89.652 81.7979 89.652 85.3135 87.4854 87.4854C85.3135 89.652 81.7979 89.652 79.626 87.4854L44.6674 52.5214L9.7087 87.4854C7.53683 89.652 4.02123 89.652 1.84937 87.4854C-0.317302 85.3135 -0.317302 81.7979 1.84937 79.626L36.8134 44.6674L1.84937 9.7087C-0.317302 7.53683 -0.317302 4.02123 1.84937 1.84937Z'
				fill='black'></path>
		</svg>
	</div>
</div>

<script>
	// Blinking cursor logic
	let blinkCount = 0
	const cursorElement: HTMLDivElement = document.querySelector('#cursor')
	const blinkInterval = setInterval(() => {
		// Check the current display value and toggle it
		if (cursorElement.style.display === 'none') {
			cursorElement.style.display = 'block'
		} else {
			cursorElement.style.display = 'none'
		}
		blinkCount++
		if (blinkCount === 10) {
			clearInterval(blinkInterval) // Stop the interval after 10 blinks
		}
	}, 500)

	// Logic for show/hide unread articles
	const buttonAll = document.querySelector('#filter-button--all')
	const buttonUnread = document.querySelector('#filter-button--unread')

	function onButtonAllHandler() {
		localStorage.setItem('showAll', 'true')
		if (buttonAll) {
			buttonAll.classList.remove('bg-black')
			buttonAll.classList.add('bg-burgundy')
		}
		if (buttonUnread) {
			buttonUnread.classList.add('bg-black')
			buttonUnread.classList.remove('bg-burgundy')
		}
		if (document.querySelector('#grid')) {
			document.querySelector('#grid').classList.remove('filter--read')
		}
	}

	// Logic to change language
	const buttonArabic = document.querySelector('#change-language--ar')
	const buttonEnglish = document.querySelector('#change-language--en')

	function initializeLanguageButton() {
		const currentLanguage = localStorage.getItem('lang')

		if (currentLanguage === 'ar' && buttonArabic) {
			buttonArabic.classList.add('bg-burgundy')
			buttonEnglish.classList.remove('bg-burgundy')
		} else if (buttonEnglish) {
			// default to English if no language is set in localStorage
			buttonEnglish.classList.add('bg-burgundy')
			buttonArabic.classList.remove('bg-burgundy')
		}
	}

	function onButtonArabicHandler() {
		localStorage.setItem('lang', 'ar')
		if (buttonArabic) {
			buttonArabic.classList.add('bg-burgundy')
		}
		if (buttonEnglish) {
			buttonEnglish.classList.remove('bg-burgundy')
		}
		if (document.querySelector('#grid')) {
			document.querySelector('#grid').classList.remove('language--en')
			document.querySelector('#grid').classList.add('language--ar')
		}
	}

	function onButtonEnglishHandler() {
		localStorage.setItem('lang', 'en')
		if (buttonEnglish) {
			buttonEnglish.classList.add('bg-burgundy')
		}
		if (buttonArabic) {
			buttonArabic.classList.remove('bg-burgundy')
		}
		if (document.querySelector('#grid')) {
			document.querySelector('#grid').classList.remove('language--ar')
			document.querySelector('#grid').classList.add('language--en')
		}
	}

	function onButtonUnreadHandler() {
		localStorage.setItem('showAll', 'false')
		if (buttonAll) {
			buttonAll.classList.remove('bg-burgundy')
			buttonAll.classList.add('bg-black')
		}
		if (buttonUnread) {
			buttonUnread.classList.add('bg-burgundy')
			buttonUnread.classList.remove('bg-black')
		}
		if (document.querySelector('#grid')) {
			document.querySelector('#grid').classList.add('filter--read')
		}
	}

	// Named function for the event listener
	function toggleShowAll(event) {
		if (!event) {
			if (localStorage.getItem('showAll') === 'false' || !localStorage.getItem('showAll')) {
				onButtonUnreadHandler()
			} else {
				onButtonAllHandler()
			}
		} else {
			// Get the id of the clicked button
			const buttonId = event.currentTarget.id

			// Decide what to do based on the button's ID
			switch (buttonId) {
				case 'filter-button--all':
					onButtonAllHandler()
					break
				case 'filter-button--unread':
					onButtonUnreadHandler()
					break
				case 'change-language--ar':
					onButtonArabicHandler()
					break
				case 'change-language--en':
					onButtonEnglishHandler()
					break
				// Add cases for other buttons as necessary
				default:
					console.error('Unknown button ID:', buttonId)
					break
			}
		}
	}

	// Trigger when content is all loaded
	document.addEventListener('DOMContentLoaded', () => {
		toggleShowAll(null)
		initializeLanguageButton()

		// Add right class to #grid based on language in localStorage
		const currentLanguage = localStorage.getItem('lang')
		if (currentLanguage === 'ar') {
			document.querySelector('#grid').classList.add('language--ar')
		} else {
			document.querySelector('#grid').classList.add('language--en')
		}

		// Add event listeners to all buttons with class .filter-button
		const buttons = document.querySelectorAll('.filter-button')
		for (let button of buttons) {
			button.addEventListener('click', toggleShowAll)
		}
	})
	// Menu overlay logic
	const menuButton = document.querySelector('#menu-button')
	// const closeButton = document.querySelector('#close-button');
	const menuOverlay = document.getElementById('menu-overlay')

	menuButton.addEventListener('click', function () {
		fadeIn(menuOverlay)
		document.body.classList.add('no-scroll')
	})

	menuOverlay.addEventListener('click', function () {
		fadeOut(menuOverlay)
		document.body.classList.remove('no-scroll')
	})

	function fadeIn(element) {
		element.style.opacity = 1
		element.style.visibility = 'visible'
	}

	function fadeOut(element) {
		element.style.opacity = 0
		setTimeout(function () {
			element.style.visibility = 'hidden'
		}, 500) // This should match the transition time (0.5s)
	}
</script>

<style>
	a:hover {
		text-decoration: none;
	}
	#menu-overlay {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.85);
		opacity: 0;
		visibility: hidden;
		transition: opacity 0.5s;
		z-index: 9999;
	}
	#menu-button {
		cursor: pointer;
	}
	#close-button {
		z-index: 9999;
	}
</style>
